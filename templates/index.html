<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask Communication</title>
</head>
<body>
    <!-- Page title -->
    <h1>Flask Two-Way Communication</h1>

    <!-- Input field for the user to type text -->
    <input type="text" id="inputText" placeholder="Enter text">

    <!-- Button to send the input to the Flask backend -->
    <button onclick="sendData()">Send</button>

    <!-- Placeholder to show the response from the backend -->
    <p id="response"></p>
    <input type="file" id="fileInput" />
    <input type ="button" onclick="uploadFile()">Upload</input>

    <script>
        // Function to send the input text to the backend
        function sendData() {
            // Get t>he text that the user typed in the input field
            const inputText = document.getElementById('inputText').value;

            // Use the "fetch" function to send a POST request to the backend
            fetch('/process', {  // The URL "/process" matches the route in the Flask backend
                method: 'POST',  // We are using POST because we're sending data
                headers: { 'Content-Type': 'application/json' },  // Tell Flask we're sending JSON
                body: JSON.stringify({ text: inputText })  // Send the user's text as JSON
            })
            .then(response => response.json())  // Convert the server's response to a JavaScript object
            .then(data => {
                // Update the page to show the response from Flask
                document.getElementById('response').innerText = 
                    `Original: ${data.original}, Reversed: ${data.reversed}`;
            });
        }
    </script>

    <script>
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0]; // Get the selected file

            if (!file) {
                alert('Please select a file first!');
                return;
            }
            console.log("processeing...");

            const formData = new FormData();
            formData.append('file', file); // Attach the file to the FormData

            fetch('/upload', {
                method: 'PUT',
                body: formData, // Send the FormData object
            })
            .then(response => response.json())
            .then(data => console.log('Response from server:', data))
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>